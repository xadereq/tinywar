<?xml version="1.0" encoding="ISO-8859-1"?>
<mod name="Skull System" version="1.0" author="Skyforever" contact="otserv-es" enabled="yes">
<config name="SkullC_func"><![CDATA[
 
function setSkullColor(cid)
local t = {
[{100,200}] = 2,
[{201,400}] = 1,
[{401,800}] = 3,
[{801,2400}] = 4,
[{2401,math.huge}] = 5
}
for var, ret in pairs(t) do
if getPlayerFrags(cid) >= var[1] and getPlayerFrags(cid) <= var[2] then
doCreatureSetSkullType(cid, ret)
end
end
end
function getPlayerFrags(cid)
local result = db.getResult("SELECT `frags` FROM `players` WHERE `id` = " .. getPlayerGUID(cid) .. ";")
if(result:getID() ~= -1) then
repeat
frags = result:getDataInt("frags")
until not result:next()
result:free()
end
return frags
end
]]></config>
<event type="login" name="SkullLogin" event="script"><![CDATA[
domodlib('SkullC_func')
function onLogin(cid)
registerCreatureEvent(cid, "ColorKill")
setSkullColor(cid)
return true
end]]></event>
<event type="kill" name="ColorKill" event="script"><![CDATA[
domodlib('SkullC_func')
function onKill(cid, target)
if isPlayer(cid) and isPlayer(target) then
doCreatureSetSkullType(target, 0)
setSkullColor(target)
end
return true
end]]></event>
</mod>